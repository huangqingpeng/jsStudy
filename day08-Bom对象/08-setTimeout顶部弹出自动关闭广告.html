<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
		    *{
		    	margin:0;
		    	padding:0;
		    }
			p{
				position:absolute;
				top:10px;
				right:20px;
				display: none;
			}
			img{
				width:100%;
				height:760px;
			}
			#div2{
				height:300px;
				width:100%;
				background:red;
			}
			#divmove{
				height:760px;
				position: absolute;
				top:-760px;
				left:0;
				width:100%;
			}
		</style>
	</head>
	<body>
		<div id="divmove">
			<div id="div1">
				<img src="img/294367.jpg" />
				<p><span id="num"></span>秒后自动关闭</p>
		    </div>
		    <div id="div2"></div>
		</div>
		<script type="text/javascript">
			var oNum=document.getElementById("num");
			var oP=document.getElementsByTagName("p")[0];
			var divMove=document.getElementById("divmove");
			var timer;
			var flag=false;
			var isCount=false;
			var count=5;
			setTimeout(function(){
				oP.style.display="block";
				//divMove.style.top="-760px";
				flag=true;
				//alert(1);
				if(flag){
					var h=-760;
					timer=setInterval(function(){
						h+=50;
						if(h>0){
							h=0;
						}
						divMove.style.top=h+"px";
						if(h==0){
							//alert(3);
							clearInterval(timer);
							isCount=true;
							//alert(1);
							if(isCount){
								fn();
							}
						}
					},50)
				}
			},2000);
			
			function fn(){
				count--;
				//console.log(count)
				//alert(1);
				if(count){
					setTimeout(fn,1000);
				}
				oNum.innerHTML=count;
				if(!count){
					oP.style.display="none";
					//alert(1);
					timer=setInterval(function(){
						//alert(1);
						var top=divMove.offsetTop;
						//alert(heights);
						top-=50;
						if(top<-760){
							top=-760;
						}
						divMove.style.top=top+"px";
						if(top==-760){
							clearInterval(timer);
							//oDiv.style.display="none";
						}
					},50)		
				}
			}
			console.log(count)
			
		</script>
	</body>
</html>
